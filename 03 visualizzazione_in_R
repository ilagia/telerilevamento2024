# Satellite data visualisation in R by imageRy
# https://sentinels.copernicus.eu/web/sentinel/user-guides/sentinel-2-msi/resolutions/spatial

library(terra)
library(imageRy)

# List of data avialable in imageRy
im.list() #ti dice cosa c'Ã¨ dentro


# Importing data
b2 <- im.import("sentinel.dolomites.b2.tif")

# Plotting the data
clg <- colorRampPalette(c("black", "grey", "light grey"))(3)  #metto la parentesi con c per raggrupparli insieme #assegnamo la crp a un oggetto# il 3 indica le sfumature
plot(b2,col=clg)

clg <- colorRampPalette(c("black", "grey", "light grey"))(100)
plot(b2, col=clg)

clcyan <- colorRampPalette(c("magenta", "cyan4", "cyan"))(3)
plot(b2, col=clcyan)

clcyan <- colorRampPalette(c("magenta", "cyan4", "cyan"))(100)
plot(b2, col=clcyan)

clch <- colorRampPalette(c("magenta", "cyan4", "cyan", "chartreuse"))(100)
plot(b2, col=clch)
# importing the additional bands #importiamo tutte e 4 le bande, come? guarda la lista iniziale (vedi sito sentinel, link sopra)

b3<- im.import("sentinel.dolomites.b3.tif")
plot(b3, col=clch)

b4<- im.import("sentinel.dolomites.b4.tif")
plot(b4, col=clch)
b8<- im.import("sentinel.dolomites.b8.tif") #infrarosso
plot(b8, col=clch)
# multiframe # creiamo una finestra grafica con le quattro immagini tutte insieme
par(mfrow=c(2,2))
plot(b2, col=clch)
plot(b3, col=clch)
plot(b4, col=clch)
plot(b8, col=clch)

# Exercise
# plot the four bands one after the other in a single row
par(mfrow=c(1,4))
plot(b2, col=clch)
plot(b3, col=clch)
plot(b4, col=clch)
plot(b8, col=clch)

# Let's make a satellite image
stacksent <- c(b2, b3, b4, b8) #stesso risultato di prima(grafico a quattro immagini) ma senza plottare ogni volta
plot(stacksent, col=clch)
plot(stacksent[[4]], col=clch) #riunisco in un unica immagine tette e quattro le altre, "le metto una sopra l'altra"
dev.off() #per chiudere le finestre grafiche

